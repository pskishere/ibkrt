======================================================================
股票分析系统 - 使用说明
======================================================================

✅ 已完成的功能

1. 后端数据获取
   - 股息历史（分红记录）
   - 机构持仓（前20大机构）
   - 内部交易（最近15笔）
   - 分析师推荐（最近10条）
   - 季度收益数据
   - 最新新闻（5条）

2. AI分析增强
   - AI分析现在包含所有市场数据
   - 分析维度：技术面 + 基本面 + 市场行为

3. 前端展示
   - 新增市场数据展示区域
   - 6个数据模块的表格/列表展示
   - 默认展开主要数据（股息、机构、分析师）

======================================================================
启动方式
======================================================================

1. 启动后端
   cd /Users/k/schwabgo
   python -m backend.app

   访问: http://localhost:8080

2. 启动前端
   cd /Users/k/schwabgo/web
   npm start

   访问: http://localhost:3000

======================================================================
测试方式
======================================================================

1. 运行集成测试
   cd /Users/k/schwabgo
   python3 test_integration.py

2. 测试API
   # 技术分析（包含所有数据）
   curl "http://localhost:8080/api/analyze/AAPL"

   # 股息数据
   curl "http://localhost:8080/api/dividends/AAPL"

   # 机构持仓
   curl "http://localhost:8080/api/institutional/AAPL"

   # 综合分析
   curl "http://localhost:8080/api/comprehensive/AAPL"

======================================================================
前端查看
======================================================================

1. 打开 http://localhost:3000
2. 输入股票代码（如 AAPL）
3. 点击「开始分析」
4. 滚动查看：
   - 技术指标
   - 关键价位  
   - 交易信号
   - 基本面数据
   - 市场数据 ⭐（新增）
     ✓ 股息历史
     ✓ 机构持仓
     ✓ 内部交易
     ✓ 分析师推荐
     ✓ 季度收益
     ✓ 最新新闻
5. 点击右下角🤖查看AI分析

======================================================================
数据流说明
======================================================================

用户输入股票代码
    ↓
后端获取所有数据
    ├── 技术指标（40+个）
    ├── 基本面数据
    └── 额外数据 (extra_data)
        ├── 股息历史
        ├── 机构持仓
        ├── 内部交易
        ├── 分析师推荐
        ├── 收益数据
        └── 新闻
    ↓
传递给AI分析（如Ollama可用）
    ↓
返回给前端
    ├── indicators（技术指标）
    ├── signals（交易信号）
    ├── candles（K线）
    ├── ai_analysis（AI分析）
    └── extra_data（额外数据）⭐
    ↓
前端展示所有数据

======================================================================
注意事项
======================================================================

1. 首次获取数据会较慢（需从yfinance获取）
2. 后续会使用缓存，速度快很多
3. 不是所有股票都有完整数据：
   - 小盘股可能机构持仓少
   - 新股可能历史数据少
   - 不分红股票无股息数据
4. AI分析需要Ollama运行
5. 所有数据仅供参考，不构成投资建议

======================================================================
已验证功能
======================================================================

✓ 额外数据能正常获取
✓ 技术分析包含所有数据
✓ 数据正确传递给AI分析
✓ 前端能完整展示所有数据
✓ 全面分析功能正常
✓ 综合评分系统工作正常

系统已准备就绪！
